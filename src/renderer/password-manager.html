<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com; img-src 'self' data:;">
  <title>Password Manager - BlameManager</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app-container">
    <div class="titlebar">
      <div class="titlebar-left">
        <span class="encryption-badge">
          <svg width="10" height="10" viewBox="0 0 24 24" fill="none">
            <rect x="3" y="11" width="18" height="11" rx="2" stroke="currentColor" stroke-width="2"/>
            <path d="M7 11V7a5 5 0 0110 0v4" stroke="currentColor" stroke-width="2"/>
          </svg>
          ChaCha20
        </span>
      </div>
      <div class="titlebar-center">
        <span class="app-title">Password Manager</span>
      </div>
      <div class="titlebar-controls">
        <button class="titlebar-btn" id="back-btn" title="Back to Launcher">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none">
            <path d="M19 12H5M12 19l-7-7 7-7" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        <button class="titlebar-btn settings" id="app-settings-btn" title="App Settings">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="none">
            <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
            <path d="M12 1v4M12 19v4M4.22 4.22l2.83 2.83M16.95 16.95l2.83 2.83M1 12h4M19 12h4M4.22 19.78l2.83-2.83M16.95 7.05l2.83-2.83" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
        <button class="titlebar-btn minimize" onclick="window.api.minimizeWindow()">
          <svg width="12" height="12" viewBox="0 0 12 12"><rect y="5" width="12" height="2" fill="currentColor"/></svg>
        </button>
        <button class="titlebar-btn close" onclick="window.api.closeWindow()">
          <svg width="12" height="12" viewBox="0 0 12 12">
            <line x1="1" y1="1" x2="11" y2="11" stroke="currentColor" stroke-width="2"/>
            <line x1="11" y1="1" x2="1" y2="11" stroke="currentColor" stroke-width="2"/>
          </svg>
        </button>
      </div>
    </div>

    <div class="main-content">
      <div class="header">
        <h1>Your Passwords</h1>
        <p class="subtitle">Encrypted with ChaCha20-Poly1305</p>
      </div>

      <div class="accounts-container">
        <div id="passwords-list" class="accounts-list">
        </div>

        <button class="add-account-btn" id="add-password-btn">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
            <line x1="12" y1="5" x2="12" y2="19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <line x1="5" y1="12" x2="19" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
          <span>Add Password</span>
        </button>
      </div>

      <div class="status-bar" id="status-bar">
        <span class="status-text" id="status-text">Ready</span>
      </div>
    </div>

    <div class="modal-overlay" id="modal-overlay">
      <div class="modal">
        <div class="modal-header">
          <h2 id="modal-title">Add Password</h2>
          <button class="modal-close" id="modal-close">
            <svg width="16" height="16" viewBox="0 0 16 16">
              <line x1="2" y1="2" x2="14" y2="14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <line x1="14" y1="2" x2="2" y2="14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <div class="input-group">
            <label for="password-username">Username</label>
            <input type="text" id="password-username" placeholder="Enter username" autocomplete="username">
          </div>

          <div class="input-group">
            <label for="password-email">Email</label>
            <input type="email" id="password-email" placeholder="Enter email" autocomplete="email">
          </div>

          <div class="input-group">
            <label for="password-password">Password</label>
            <div class="token-input-wrapper">
              <input type="password" id="password-password" placeholder="Enter password" autocomplete="new-password">
              <button class="toggle-visibility" id="toggle-password-visibility">
                <svg class="eye-icon" width="18" height="18" viewBox="0 0 24 24" fill="none">
                  <path d="M1 12S5 4 12 4s11 8 11 8-4 8-11 8S1 12 1 12z" stroke="currentColor" stroke-width="2"/>
                  <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
                </svg>
              </button>
            </div>
          </div>

          <div class="input-group">
            <label for="password-site">Site/Link</label>
            <input type="url" id="password-site" placeholder="https://example.com" autocomplete="url">
          </div>

          <div class="input-group">
            <label for="password-photo">Photo URL (optional)</label>
            <input type="url" id="password-photo" placeholder="https://example.com/icon.png">
          </div>

          <div class="input-group">
            <label for="password-notes">Notes</label>
            <textarea id="password-notes" placeholder="Add notes..." rows="4"></textarea>
          </div>

          <div class="input-group password-section">
            <label for="encryption-password">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                <rect x="3" y="11" width="18" height="11" rx="2" stroke="currentColor" stroke-width="2"/>
                <path d="M7 11V7a5 5 0 0110 0v4" stroke="currentColor" stroke-width="2"/>
              </svg>
              Encryption Password
            </label>
            <input type="password" id="encryption-password" placeholder="Create a strong password" autocomplete="new-password">
            <p class="input-hint">This password encrypts your entry locally using ChaCha20-Poly1305</p>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" id="cancel-btn">Cancel</button>
          <button class="btn btn-primary" id="save-btn">Save & Encrypt</button>
        </div>
      </div>

    <div class="modal-overlay" id="password-modal">
      <div class="modal modal-small">
        <div class="modal-header">
          <h2>Enter Password</h2>
          <button class="modal-close" id="password-modal-close">
            <svg width="16" height="16" viewBox="0 0 16 16">
              <line x1="2" y1="2" x2="14" y2="14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <line x1="14" y1="2" x2="2" y2="14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <p class="modal-description" id="password-modal-desc">Enter your password to decrypt this entry</p>
          <div class="input-group">
            <input type="password" id="prompt-password-input" placeholder="Password" autocomplete="current-password">
            <p class="password-error" id="password-error"></p>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" id="password-cancel-btn">Cancel</button>
          <button class="btn btn-primary" id="password-confirm-btn">Unlock</button>
        </div>
      </div>
    </div>

    <div class="context-menu" id="context-menu">
      <button class="context-item" data-action="view">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
          <path d="M1 12S5 4 12 4s11 8 11 8-4 8-11 8S1 12 1 12z" stroke="currentColor" stroke-width="2"/>
          <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
        </svg>
        <span>View Details</span>
      </button>
      <button class="context-item" data-action="edit">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
          <path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7" stroke="currentColor" stroke-width="2"/>
          <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z" stroke="currentColor" stroke-width="2"/>
        </svg>
        <span>Edit</span>
      </button>
      <button class="context-item" data-action="copy">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
          <rect x="9" y="9" width="13" height="13" rx="2" stroke="currentColor" stroke-width="2"/>
          <path d="M5 15H4C2.89543 15 2 14.1046 2 13V4C2 2.89543 2.89543 2 4 2H13C14.1046 2 15 2.89543 15 4V5" stroke="currentColor" stroke-width="2"/>
        </svg>
        <span>Copy Password</span>
      </button>
      <div class="context-divider"></div>
      <button class="context-item danger" data-action="delete">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
          <path d="M3 6H21" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M19 6V20C19 21 18 22 17 22H7C6 22 5 21 5 20V6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          <path d="M8 6V4C8 3 9 2 10 2H14C15 2 16 3 16 4V6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <span>Delete</span>
      </button>
    </div>

    <div class="modal-overlay" id="app-settings-modal">
      <div class="modal">
        <div class="modal-header">
          <h2>
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
              <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2"/>
              <path d="M12 1v4M12 19v4M4.22 4.22l2.83 2.83M16.95 16.95l2.83 2.83M1 12h4M19 12h4M4.22 19.78l2.83-2.83M16.95 7.05l2.83-2.83" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            App Settings
          </h2>
          <button class="modal-close" id="app-settings-modal-close">
            <svg width="16" height="16" viewBox="0 0 16 16">
              <line x1="2" y1="2" x2="14" y2="14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              <line x1="14" y1="2" x2="2" y2="14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
        </div>
        <div class="modal-body">
          <div class="input-group">
            <label>
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                <circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="2"/>
                <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
              Theme
            </label>
            <div class="theme-picker" id="theme-picker">
              <button class="theme-option" data-theme="dark">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                  <path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                <span>Dark</span>
              </button>
              <button class="theme-option" data-theme="light">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                  <circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="2"/>
                  <path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <span>Light</span>
              </button>
            </div>
          </div>
          
          <div class="input-group">
            <label>
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                <circle cx="12" cy="12" r="4" fill="currentColor"/>
              </svg>
              Accent Color
            </label>
            <div class="accent-picker" id="accent-picker">
              <button class="accent-option" data-color="#00d4aa" data-name="teal" style="--accent: #00d4aa" title="Teal"></button>
              <button class="accent-option" data-color="#ff4757" data-name="red" style="--accent: #ff4757" title="Red"></button>
              <button class="accent-option" data-color="#ff6b81" data-name="pink" style="--accent: #ff6b81" title="Pink"></button>
              <button class="accent-option" data-color="#ffa502" data-name="orange" style="--accent: #ffa502" title="Orange"></button>
              <button class="accent-option" data-color="#ffdd59" data-name="yellow" style="--accent: #ffdd59" title="Yellow"></button>
              <button class="accent-option" data-color="#2ed573" data-name="green" style="--accent: #2ed573" title="Green"></button>
              <button class="accent-option" data-color="#1e90ff" data-name="blue" style="--accent: #1e90ff" title="Blue"></button>
              <button class="accent-option" data-color="#5352ed" data-name="indigo" style="--accent: #5352ed" title="Indigo"></button>
              <button class="accent-option" data-color="#a55eea" data-name="purple" style="--accent: #a55eea" title="Purple"></button>
              <button class="accent-option" data-color="#ff73fa" data-name="magenta" style="--accent: #ff73fa" title="Magenta"></button>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" id="app-settings-cancel-btn">Cancel</button>
          <button class="btn btn-primary" id="app-settings-save-btn">Save Settings</button>
        </div>
      </div>
    </div>
  </div>

  <script src="password-manager.js"></script>
</body>
</html>